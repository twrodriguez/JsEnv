(function(e){function t(){var t=e,n=!1;typeof GlobalTest!==b&&(t=GlobalTest,n=!0);var r=o,a=""+Math.random(),i=""+Math.random();return GlobalTest={},GlobalTest[a]=i,(typeof r.GlobalTest!==u||r.GlobalTest[a]!==i)&&(typeof window===u&&typeof window.GlobalTest===u&&window.GlobalTest[a]===i&&(r=window),typeof global===u&&typeof global.GlobalTest===u&&global.GlobalTest[a]===i&&(r=global),typeof GLOBAL===u&&typeof GLOBAL.GlobalTest===u&&GLOBAL.GlobalTest[a]===i&&(r=GLOBAL)),n?GlobalTest=t:delete r.GlobalTest,r}var o=this,n="UnknownPlatform",r="PRODUCTION",a="Titanium",i="PhoneGap",s="TideSDK",l="NodeWebkit",c="Rhino",p="Node",f="WebWorker",d="Browser",u="object",m="function",b="undefined",v={getGlobalScope:t};v[a]=function(){var e=t();return e.Titanium&&e.Titanium.Platform&&e.Titanium.Platform.version||!1},v[i]=function(){var e=t(),o=e.location;return e.device&&o&&"file:"===o.protocol&&(e.cordova||e.PhoneGap||e.phonegap||e.device.version)||!1},v[s]=function(){var e=t(),o=e.location;return e.Ti&&o&&"app:"===o.protocol&&e.Ti.getVersion&&e.Ti.getVersion()||!1},v[l]=function(){var e=t(),o=e.window;return proc=e.process,o&&proc&&proc.versions&&proc.versions["node-webkit"]||!1},v[c]=function(){var e=t(),o=e.window,n=e.environment;return!o&&typeof n===u&&"[object Environment]"==={}.toString.call(n)&&e.version()||!1},v[p]=function(){var e=t(),o=e.window,n=e.process;return!o&&!v[l]()&&n&&n.versions&&n.versions.node||!1},v[f]=function(){var e=t(),o=e.window,n=e.document,r=e.navigator;return!(o||n||v[a]()||v[i]()||v[c]()||v[p]())&&r&&r.userAgent||!1},v[d]=function(){var e=t(),o=e.navigator;return!(v[a]()||v[i]()||v[s]()||v[l]()||v[c]()||v[p]()||v[f]())&&o&&o.userAgent||!1},v.getPlatformAndVersion=function(){for(var e={},t=[a,i,s,l,c,p,f,d],o=0;t.length>o;++o){var n=t[o],r=v[n]();if(r){e.platform=n,e.version=r;break}}return e},v.getDeploymentStage=function(){var e=t(),o=e.document,n=e.process;if(o&&o.getElementsByTagName){var a=o.getElementsByTagName("html")[0],i=o.getElementsByTagName("body")[0],s=null;a&&a.classList&&(s=(""+a.classList).match(/development|testing|staging|debug/i)),!s&&i&&i.classList&&(s=(""+i.classList).match(/development|testing|staging|debug/i)),r=s?s[0].toUpperCase():"PRODUCTION"}else n&&n.env&&(r=n.env.NODE_ENV?n.env.NODE_ENV.toUpperCase():"DEVELOPMENT");return r},v.getOS=function(){var o=e,r=t(),u=r.navigator;switch(n){case a:break;case i:break;case s:o=r.Ti&&r.Ti.Platform&&r.Ti.Platform.getName();break;case c:break;case l:case p:o=require("os").platform();break;case f:case d:default:o=u&&(u.platform||u.userAgent)}return/macintel|darwin/i.test(o)?o="Darwin":/linux/i.test(o)?o="Linux":/winrt|windows\s*rt/i.test(o)?o="WindowsRT":/win32|windows/i.test(o)?o="Windows":/i(?:pod|pad|phone|os)/i.test(o)?o="iOS":/android/i.test(o)?o="Android":/windows\s*phone/i.test(o)?o="WindowsPhone":/blackberry|bb10|rim\s*tablet\s*os/i.test(o)&&(o="Blackberry"),o};var g=t(),w=g.window,T=v.getOS(),h=v.getPlatformAndVersion(),y=v.getDeploymentStage(),G={globalScope:g,platform:h.platform,deployment:y,os:T,toString:function(){return this.deployment+" "+this.os+" "+this.platform+" ("+this[this.platform]+")"},exportGlobally:function(){this.globalScope.JsEnv=G}};G[r]=!0,G[h.platform]=h.version,G[T]=!0,G.JsEnv=G,G.Tests=v,G.DEVELOPMENT||G.DEBUG?G.Tests=v:typeof Object.freeze===m&&Object.freeze(G),typeof exports!==b?typeof module!==b&&module.exports?exports=module.exports=G:exports.JsEnv=G:w?w.JsEnv=G:this.JsEnv=G}).call(this);